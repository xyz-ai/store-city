(function(){var t={5020:function(t,e,s){"use strict";var a=s(5130),n=(s(8111),s(8237),s(6768)),o=s(4232),l=s(4373),i=s(144),r=s(782);const u={id:"store_app"},c={class:"navbar is-dark"},d={class:"navbar-brand"},m=["aria-expanded"],p={class:"navbar-end"},v={class:"navbar-item"},h={class:"buttons"},k={key:0,class:"is-loading-bar has-text-centered"},g={class:"section"};var L={__name:"App",setup(t){const e=(0,r.Pj)(),s=(0,i.KR)(!1),a=()=>{s.value=!s.value},L=(0,n.EW)((()=>e.state.isLoading)),f=(0,n.EW)((()=>e.state.token));(0,n.wB)(f,(t=>{l.A.defaults.headers.common["Authorization"]=t?"Token "+t:""}));const y=(0,n.EW)((()=>{const t=e.state.cart.items;return t.reduce(((t,e)=>t+(e.quantity||0)),0)}));return(t,e)=>{const l=(0,n.g2)("router-link"),i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("nav",c,[(0,n.Lk)("div",d,[(0,n.bF)(l,{to:"/",class:"navbar-item"},{default:(0,n.k6)((()=>e[0]||(e[0]=[(0,n.Lk)("strong",null,"Store",-1)]))),_:1}),(0,n.Lk)("a",{class:"navbar-burger burger",role:"button","aria-label":"menu","aria-expanded":s.value,onClick:a},e[1]||(e[1]=[(0,n.Lk)("span",{"aria-hidden":"true"},null,-1),(0,n.Lk)("span",{"aria-hidden":"true"},null,-1),(0,n.Lk)("span",{"aria-hidden":"true"},null,-1)]),8,m)]),(0,n.Lk)("div",{class:(0,o.C4)(["navbar-menu",{"is-active":s.value}]),id:"navbar-menu"},[e[8]||(e[8]=(0,n.Lk)("div",{class:"navbar-start"},[(0,n.Lk)("div",{class:"navbar-item"},[(0,n.Lk)("form",{method:"get",action:"/search"},[(0,n.Lk)("div",{class:"field has-addons"},[(0,n.Lk)("div",{class:"control"},[(0,n.Lk)("input",{class:"input",type:"text",name:"query",placeholder:"Search for products",required:""})]),(0,n.Lk)("div",{class:"control"},[(0,n.Lk)("button",{type:"submit ",class:"button is-success"},[(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"fas fa-search"})])])])])])])],-1)),(0,n.Lk)("div",p,[(0,n.bF)(l,{to:"/summer",class:"navbar-item"},{default:(0,n.k6)((()=>e[2]||(e[2]=[(0,n.eW)("Summer")]))),_:1}),(0,n.bF)(l,{to:"/winter",class:"navbar-item"},{default:(0,n.k6)((()=>e[3]||(e[3]=[(0,n.eW)("Winter")]))),_:1}),(0,n.Lk)("div",v,[(0,n.Lk)("div",h,[t.$store.state.isAuthenticated?((0,n.uX)(),(0,n.Wv)(l,{key:0,to:"/my-account",class:"button is-light"},{default:(0,n.k6)((()=>e[4]||(e[4]=[(0,n.eW)("My account")]))),_:1})):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.bF)(l,{to:"/log-in",class:"button is-light"},{default:(0,n.k6)((()=>e[5]||(e[5]=[(0,n.eW)("Log In")]))),_:1}),(0,n.bF)(l,{to:"/sign-up",class:"button is-light"},{default:(0,n.k6)((()=>e[6]||(e[6]=[(0,n.eW)("Sign Up")]))),_:1})],64)),(0,n.bF)(l,{to:"/cart",class:"button is-primary"},{default:(0,n.k6)((()=>[e[7]||(e[7]=(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"fas fa-shopping-cart"})],-1)),(0,n.Lk)("span",null,"Cart ("+(0,o.v_)(y.value)+")",1)])),_:1})])])])],2)]),L.value?((0,n.uX)(),(0,n.CE)("div",k,e[9]||(e[9]=[(0,n.Lk)("div",{class:"lds-dual-ring"},null,-1)]))):(0,n.Q3)("",!0),(0,n.Lk)("section",g,[(0,n.bF)(i)]),e[10]||(e[10]=(0,n.Lk)("footer",{class:"footer"},[(0,n.Lk)("p",{class:"has-text-centered"},[(0,n.Lk)("strong",null,"Store_Copyright (c) 2025")])],-1))])}}};const f=L;var y=f,b=(s(3579),s(1387));const _={class:"column is-3"},C={class:"box"},E={class:"image mb-4"},S=["src"],I={class:"title is-4"},x={class:"is-size-6 has-text-grey"};var w={__name:"ProductBox",props:{product:{type:Object,required:!0}},setup(t){return(e,s)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",C,[(0,n.Lk)("figure",E,[(0,n.Lk)("img",{src:t.product.get_thumbnail},null,8,S)]),(0,n.Lk)("h3",I,(0,o.v_)(t.product.name),1),(0,n.Lk)("p",x,"$"+(0,o.v_)(t.product.price),1),(0,n.bF)(a,{to:t.product.get_absolute_url,class:"button is-dark mt-4"},{default:(0,n.k6)((()=>s[0]||(s[0]=[(0,n.eW)(" View details ")]))),_:1},8,["to"])])])}}},T=s(1241);const X=(0,T.A)(w,[["__scopeId","data-v-8efec4b4"]]);var A=X;const P={class:"box mb-4"},O={class:"is-size-4 mb-6"},q={class:"table is-fullwidth"};function F(t,e,s,a,l,i){return(0,n.uX)(),(0,n.CE)("div",P,[(0,n.Lk)("h3",O,"Order #"+(0,o.v_)(s.order.id),1),e[1]||(e[1]=(0,n.Lk)("h4",{class:"is-size-5"},"Products",-1)),(0,n.Lk)("table",q,[e[0]||(e[0]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Product"),(0,n.Lk)("th",null,"Price"),(0,n.Lk)("th",null,"Quantity"),(0,n.Lk)("th",null,"Total")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.order.items,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.product.id},[(0,n.Lk)("td",null,(0,o.v_)(t.product.name),1),(0,n.Lk)("td",null,"$"+(0,o.v_)(t.product.price),1),(0,n.Lk)("td",null,(0,o.v_)(t.quantity),1),(0,n.Lk)("td",null,"$"+(0,o.v_)(i.getItemTotal(t).toFixed(2)),1)])))),128))])])])}var K={name:"OrderSummary",props:{order:Object},methods:{getItemTotal(t){return t.quantity*t.product.price},orderTotalLength(t){return t.items.reduce(((t,e)=>t+e.quantity),0)}}};const $=(0,T.A)(K,[["render",F]]);var W=$;const j={class:"home"},J={class:"columns is-multiline"};var R={__name:"HomeView",setup(t){const e=(0,r.Pj)(),s=(0,i.KR)([]);return(0,n.sV)((async()=>{try{e.commit("setLoading",!0);const t=await l.A.get("/api/v1/latest-products/");if(s.value=t.data,document.title="Store - Latest Products",!s.value)throw new Error("No latest products found")}catch(t){console.error("Error fetching latest products:",t)}finally{e.commit("setLoading",!1)}})),(t,e)=>((0,n.uX)(),(0,n.CE)("div",j,[e[1]||(e[1]=(0,n.Lk)("section",{class:"hero is-medium is-dark mb-6"},[(0,n.Lk)("div",{class:"hero-body has-text-centered"},[(0,n.Lk)("p",{class:"title mb-6"}," Welcome to the Store "),(0,n.Lk)("p",{class:"subtitle"}," Your one-stop shop for all your needs ")])],-1)),(0,n.Lk)("div",J,[e[0]||(e[0]=(0,n.Lk)("div",{class:"column is-12"},[(0,n.Lk)("h2",{class:"title is-size-2 has-text-centered"},"Latest Products")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,(t=>((0,n.uX)(),(0,n.Wv)(A,{key:t.id,product:t},null,8,["product"])))),128))])]))}};const z=R;var U=z,N=s(5547);const V={class:"page product-page"},Q={key:0,class:"has-text-centered"},M={key:1,class:"has-text-centered"},B={class:"has-text-danger"},D={key:2,class:"column is-multiline"},H={class:"column is-9"},Y={class:"image mb-6"},G=["src"],Z={class:"title"},tt={class:"column is-3"},et={class:"field has-addons mt-6"},st={class:"control"};var at={__name:"Product",setup(t){const e=(0,r.Pj)(),s=(0,b.lq)(),u=((0,b.rd)(),(0,i.KR)(1)),c=(0,i.KR)({}),d=(0,i.KR)(!0),m=(0,i.KR)(null);(0,n.sV)((async()=>{try{e.commit("setLoading",!0);const t=await l.A.get(`/api/v1/products/${s.params.category_slug}/${s.params.product_slug}/`);if(c.value=t.data,document.title="Store - "+c.value.name,!c.value)return void(m.value="Product not found")}catch(t){m.value="Failed to load product. Please try again.",console.error("Error fetching product:",t)}finally{e.commit("setLoading",!1),d.value=!1}}));const p=()=>{(isNaN(u.value)||u.value<1)&&(u.value=1);const t={product:c.value,quantity:u.value};e.commit("addToCart",t),(0,N.toast)({message:`${c.value.name} has been added to your cart`,type:"is-success",duration:3e3,position:"top-center",closeOnClick:!0,pauseOnHover:!0})};return(t,e)=>((0,n.uX)(),(0,n.CE)("div",V,[d.value?((0,n.uX)(),(0,n.CE)("div",Q,e[1]||(e[1]=[(0,n.Lk)("p",null,"Loading...",-1)]))):m.value?((0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("p",B,(0,o.v_)(m.value),1)])):((0,n.uX)(),(0,n.CE)("div",D,[(0,n.Lk)("div",H,[(0,n.Lk)("figure",Y,[c.value.get_image?((0,n.uX)(),(0,n.CE)("img",{key:0,src:c.value.get_image,alt:"Product image"},null,8,G)):(0,n.Q3)("",!0)]),(0,n.Lk)("h1",Z,(0,o.v_)(c.value.name),1),(0,n.Lk)("p",null,(0,o.v_)(c.value.description),1)]),(0,n.Lk)("div",tt,[e[3]||(e[3]=(0,n.Lk)("h2",{class:"subtitle"},"Information",-1)),(0,n.Lk)("p",null,[e[2]||(e[2]=(0,n.Lk)("strong",null,"Price:",-1)),(0,n.eW)(" $"+(0,o.v_)(c.value.price),1)]),(0,n.Lk)("div",et,[(0,n.Lk)("div",st,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"input",min:"1","onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t)},null,512),[[a.Jo,u.value]])]),(0,n.Lk)("div",{class:"control"},[(0,n.Lk)("a",{class:"button is-dark",onClick:p},"Add to cart")])])])]))]))}};const nt=at;var ot=nt;const lt={class:"page-category"},it={class:"columns is-multiline"},rt={class:"column is-12"},ut={class:"title is-size-2 has-text-centered"};var ct={__name:"Category",setup(t){const e=(0,b.lq)(),s=(0,r.Pj)(),a=(0,i.KR)({}),u=async()=>{try{s.commit("setLoading",!0);const t=await l.A.get(`/api/v1/products/${e.params.category_slug}/`);a.value=t.data,s.commit("setCategory",t.data),document.title="Store - "+a.value.name}catch(t){s.commit("setError","Failed to load category. Please try again."),console.error("Error fetching category:",t)}finally{s.commit("setLoading",!1)}};return(0,n.sV)(u),(0,n.wB)((()=>e.params.category_slug),u),(t,e)=>((0,n.uX)(),(0,n.CE)("div",lt,[(0,n.Lk)("div",it,[(0,n.Lk)("div",rt,[(0,n.Lk)("h2",ut,(0,o.v_)(a.value.name),1)])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value.products,(t=>((0,n.uX)(),(0,n.Wv)(A,{key:t.id,product:t},null,8,["product"])))),128))]))}};const dt=ct;var mt=dt;const pt={class:"page-search"},vt={class:"columns is-multiline"},ht={class:"column is-12"},kt={class:"title is-size-2 has-text-centered"},gt={key:0,class:"column is-12 has-text-centered"},Lt={key:1,class:"column is-12 has-text-centered"},ft={class:"has-text-danger"},yt={key:2,class:"column is-12 has-text-centered"},bt={key:3,class:"column is-12"};var _t={__name:"Search",setup(t){const e=(0,r.Pj)(),s=(0,i.KR)(""),a=(0,i.KR)([]),u=(0,i.KR)(!0),c=(0,i.KR)(null);document.title="Store - Search";const d=window.location.search.substring(1),m=new URLSearchParams(d);return m.get("query")&&(s.value=m.get("query")),(0,n.sV)((async()=>{try{e.commit("setLoading",!0),u.value=!0;const t=await l.A.post("/api/v1/products/search/",{query:s.value});a.value=t.data.results||[]}catch(t){c.value=t.response?.data?.error||"Failed to load search results. Please try again.",console.error("Error fetching search results:",t)}finally{e.commit("setLoading",!1),u.value=!1}})),(t,e)=>((0,n.uX)(),(0,n.CE)("div",pt,[(0,n.Lk)("div",vt,[(0,n.Lk)("div",ht,[(0,n.Lk)("h2",kt,'Search term: "'+(0,o.v_)(s.value)+'"',1)]),u.value?((0,n.uX)(),(0,n.CE)("div",gt,e[0]||(e[0]=[(0,n.Lk)("p",null,"Loading...",-1)]))):c.value?((0,n.uX)(),(0,n.CE)("div",Lt,[(0,n.Lk)("p",ft,(0,o.v_)(c.value),1)])):0===a.value.length?((0,n.uX)(),(0,n.CE)("div",yt,[(0,n.Lk)("p",null,'No products found for "'+(0,o.v_)(s.value)+'".',1)])):((0,n.uX)(),(0,n.CE)("div",bt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(t=>((0,n.uX)(),(0,n.Wv)(A,{key:t.id,product:t},null,8,["product"])))),128))]))])]))}};const Ct=_t;var Et=Ct;s(2489),s(116),s(7697);const St={class:"mx-2"};var It={__name:"CartItem",props:{initialItem:Object},emits:["updateQuantity","deleteItem"],setup(t,{emit:e}){const s=t,a=e;function l(t){return t.quantity*t.product.price}function i(){a("updateQuantity",{item:s.initialItem,change:1})}function r(){s.initialItem.quantity>1&&a("updateQuantity",{item:s.initialItem,change:-1})}function u(){a("deleteItem",s.initialItem)}return(e,s)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("tr",null,[(0,n.Lk)("td",null,[(0,n.bF)(a,{to:t.initialItem.product.get_absolute_url,class:"product-name"},{default:(0,n.k6)((()=>[(0,n.eW)((0,o.v_)(t.initialItem.product.name),1)])),_:1},8,["to"])]),(0,n.Lk)("td",null,"$"+(0,o.v_)(t.initialItem.product.price),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"button is-small",onClick:r},"-"),(0,n.Lk)("span",St,(0,o.v_)(t.initialItem.quantity),1),(0,n.Lk)("button",{class:"button is-small",onClick:i},"+")]),(0,n.Lk)("td",null,"$"+(0,o.v_)(l(t.initialItem).toFixed(2)),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"delete",onClick:u})])])}}};const xt=(0,T.A)(It,[["__scopeId","data-v-98865ffa"]]);var wt=xt;const Tt={class:"page-cart"},Xt={class:"column is-multiline"},At={class:"column is-12 box"},Pt={key:0,class:"table is-fullwidth"},Ot={key:1},qt={class:"column is-12 box"};var Ft={__name:"Cart",setup(t){const e=(0,r.Pj)(),s=(0,i.KR)({items:[]}),a=(0,n.EW)((()=>s.value&&Array.isArray(s.value.items)?s.value.items:[]));function l({item:t,change:a}){const n=s.value.items.find((e=>e.product.id===t.product.id));n&&(n.quantity+=a,n.quantity<1&&(n.quantity=1)),e.commit("setCart",{...s.value}),localStorage.setItem("cart",JSON.stringify(s.value))}function u(t){s.value.items=s.value.items.filter((e=>e.product.id!==t.product.id)),e.commit("setCart",{...s.value}),localStorage.setItem("cart",JSON.stringify(s.value))}(0,n.sV)((()=>{try{e.commit("setLoading",!0);const t=localStorage.getItem("cart"),a=t?JSON.parse(t):e.state.cart||{items:[]};s.value.items=Array.isArray(a.items)?a.items:[]}catch(t){console.error("Error loading cart:",t)}finally{e.commit("setLoading",!1)}}));const c=(0,n.EW)((()=>a.value.reduce(((t,e)=>t+(e.quantity||0)),0))),d=(0,n.EW)((()=>a.value.reduce(((t,e)=>t+(e.quantity*e.product.price||0)),0)));return(t,e)=>{const s=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Tt,[(0,n.Lk)("div",Xt,[e[4]||(e[4]=(0,n.Lk)("div",{class:"column is-12"},[(0,n.Lk)("h1",{class:"title"},"Cart")],-1)),(0,n.Lk)("div",At,[c.value?((0,n.uX)(),(0,n.CE)("table",Pt,[e[0]||(e[0]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Product"),(0,n.Lk)("th",null,"Price"),(0,n.Lk)("th",null,"Quantity"),(0,n.Lk)("th",null,"Total"),(0,n.Lk)("th")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(t=>((0,n.uX)(),(0,n.Wv)(wt,{key:t.product.id,initialItem:t,onUpdateQuantity:l,onDeleteItem:u},null,8,["initialItem"])))),128))])])):((0,n.uX)(),(0,n.CE)("p",Ot,"You don't have any products in your cart..."))]),e[5]||(e[5]=(0,n.Lk)("div",{style:{height:"20px"}},null,-1)),(0,n.Lk)("div",qt,[e[2]||(e[2]=(0,n.Lk)("h2",{class:"subtitle"},"Summary",-1)),(0,n.Lk)("strong",null,"$"+(0,o.v_)(d.value.toFixed(2)),1),(0,n.eW)(", "+(0,o.v_)(c.value)+" items ",1),e[3]||(e[3]=(0,n.Lk)("hr",null,null,-1)),(0,n.bF)(s,{to:"/cart/checkout",class:"button is-dark"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("Proceed to checkout")]))),_:1})])])])}}};const Kt=Ft;var $t=Kt;s(4114);const Wt={class:"page-sing-up"},jt={class:"columns"},Jt={class:"column is-4 is-offset-4"},Rt={class:"field"},zt={class:"control"},Ut={class:"field"},Nt={class:"control"},Vt={class:"field"},Qt={class:"control"},Mt={key:0,class:"notification is-danger"};var Bt={__name:"SignUp",setup(t){const e=(0,r.Pj)(),s=(0,i.KR)(""),u=(0,i.KR)(""),c=(0,i.KR)(""),d=(0,i.KR)([]),m=(0,b.rd)();function p(){if(d.value=[],""===s.value&&d.value.push("The username is missing"),""===u.value&&d.value.push("The password is too short"),u.value!==c.value&&d.value.push("The passwords don't match"),!d.value.length){const t={username:s.value,password:u.value};l.A.post("/api/v1/users/",t).then((t=>{(0,N.toast)({message:"Account created, please log in!",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"}),m.push("/log-in")})).catch((t=>{if(t.response){for(const e in t.response.data)d.value.push(`${e}: ${t.response.data[e]}`);console.log(JSON.stringify(t.response.data))}else t.message&&(d.value.push("Something went wrong, Please try again"),console.log(JSON.stringify(t)))}))}}return document.title="store - sign up",(0,n.sV)((()=>{e.commit("setLoading",!0),setTimeout((()=>{e.commit("setLoading",!1)}),100)})),(t,e)=>{const l=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Wt,[(0,n.Lk)("div",jt,[(0,n.Lk)("div",Jt,[e[12]||(e[12]=(0,n.Lk)("h1",{class:"title"},"Sign Up",-1)),e[13]||(e[13]=(0,n.Lk)("div",{style:{height:"20px"}},null,-1)),(0,n.Lk)("form",{onSubmit:(0,a.D$)(p,["prevent"])},[(0,n.Lk)("div",Rt,[e[3]||(e[3]=(0,n.Lk)("label",null,"Username",-1)),(0,n.Lk)("div",zt,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t)},null,512),[[a.Jo,s.value]])])]),e[7]||(e[7]=(0,n.Lk)("div",{style:{height:"10px"}},null,-1)),(0,n.Lk)("div",Ut,[e[4]||(e[4]=(0,n.Lk)("label",null,"Password",-1)),(0,n.Lk)("div",Nt,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t)},null,512),[[a.Jo,u.value]])])]),e[8]||(e[8]=(0,n.Lk)("div",{style:{height:"10px"}},null,-1)),(0,n.Lk)("div",Vt,[e[5]||(e[5]=(0,n.Lk)("label",null,"Repeat Password",-1)),(0,n.Lk)("div",Qt,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t)},null,512),[[a.Jo,c.value]])])]),e[9]||(e[9]=(0,n.Lk)("div",{style:{height:"10px"}},null,-1)),d.value.length?((0,n.uX)(),(0,n.CE)("div",Mt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.value,(t=>((0,n.uX)(),(0,n.CE)("p",{key:t},(0,o.v_)(t),1)))),128))])):(0,n.Q3)("",!0),e[10]||(e[10]=(0,n.Fv)('<div style="height:10px;"></div><div class="field"><div class="control"><button class="button is-dark">Sign up</button></div></div><div style="height:20px;"></div> Or ',4)),(0,n.bF)(l,{to:"/log-in"},{default:(0,n.k6)((()=>e[6]||(e[6]=[(0,n.eW)("click here")]))),_:1}),e[11]||(e[11]=(0,n.eW)(" to log in! "))],32)])])])}}};const Dt=Bt;var Ht=Dt;const Yt={class:"page-log-in"},Gt={class:"columns"},Zt={class:"column is-4 is-offset-4"},te={class:"field"},ee={class:"control"},se={class:"field"},ae={class:"control"},ne={key:0,class:"notification is-danger"};var oe={__name:"LogIn",setup(t){const e=(0,i.KR)(""),s=(0,i.KR)(""),u=(0,i.KR)([]),c=(0,r.Pj)(),d=(0,b.lq)(),m=(0,b.rd)();async function p(){l.A.defaults.headers.common["Authorization"]="",localStorage.removeItem("token");const t={username:e.value,password:s.value};await l.A.post("/api/v1/token/login/",t).then((t=>{const e=t.data.auth_token;c.commit("setToken",e),l.A.defaults.headers.common["Authorization"]="Token"+e,localStorage.setItem("token",e),localStorage.setItem("authToken",e);const s=d.query.to||"/cart";m.push(s)})).catch((t=>{if(t.response){for(const e in t.response.data)u.value.push(`${e}: ${t.response.data[e]}`);console.log(JSON.stringify(t.response.data))}else t.message&&(u.value.push("Something went wrong, Please try again"),console.log(JSON.stringify(t)))}))}return document.title="store - log in",(t,l)=>{const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Yt,[(0,n.Lk)("div",Gt,[(0,n.Lk)("div",Zt,[l[9]||(l[9]=(0,n.Lk)("h1",{class:"title"},"Log In",-1)),l[10]||(l[10]=(0,n.Lk)("div",{style:{height:"20px"}},null,-1)),(0,n.Lk)("form",{onSubmit:(0,a.D$)(p,["prevent"])},[(0,n.Lk)("div",te,[l[2]||(l[2]=(0,n.Lk)("label",null,"Username",-1)),(0,n.Lk)("div",ee,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":l[0]||(l[0]=t=>e.value=t)},null,512),[[a.Jo,e.value]])])]),l[5]||(l[5]=(0,n.Lk)("div",{style:{height:"10px"}},null,-1)),(0,n.Lk)("div",se,[l[3]||(l[3]=(0,n.Lk)("label",null,"Password",-1)),(0,n.Lk)("div",ae,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:"input","onUpdate:modelValue":l[1]||(l[1]=t=>s.value=t)},null,512),[[a.Jo,s.value]])])]),l[6]||(l[6]=(0,n.Lk)("div",{style:{height:"10px"}},null,-1)),u.value.length?((0,n.uX)(),(0,n.CE)("div",ne,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,(t=>((0,n.uX)(),(0,n.CE)("p",{key:t},(0,o.v_)(t),1)))),128))])):(0,n.Q3)("",!0),l[7]||(l[7]=(0,n.Fv)('<div style="height:10px;"></div><div class="field"><div class="control"><button class="button is-dark">Log in</button></div></div><div style="height:20px;"></div> Or ',4)),(0,n.bF)(i,{to:"/sign-up"},{default:(0,n.k6)((()=>l[4]||(l[4]=[(0,n.eW)("click here")]))),_:1}),l[8]||(l[8]=(0,n.eW)(" to sign up! "))],32)])])])}}};const le=oe;var ie=le;const re={class:"page-my-account"},ue={class:"columns is-multiline"},ce={class:"column is-12"},de={class:"column is-12"};function me(t,e,s,a,o,l){const i=(0,n.g2)("OrderSummary");return(0,n.uX)(),(0,n.CE)("div",re,[(0,n.Lk)("div",ue,[e[2]||(e[2]=(0,n.Lk)("div",{class:"column is-12"},[(0,n.Lk)("h1",{class:"title"},"My account")],-1)),(0,n.Lk)("div",ce,[(0,n.Lk)("button",{onClick:e[0]||(e[0]=t=>l.logout()),class:"button is-danger"},"Log out")]),e[3]||(e[3]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",de,[e[1]||(e[1]=(0,n.Lk)("h2",{class:"subtitle"},"My orders",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.orders,(t=>((0,n.uX)(),(0,n.Wv)(i,{key:t.id,order:t},null,8,["order"])))),128))])])])}var pe={name:"MyAccount",components:{OrderSummary:W},data(){return{orders:[]}},mounted(){document.title="My account | Djackets",this.getMyOrders()},methods:{logout(){l.A.defaults.headers.common["Authorization"]="",localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userid"),this.$store.commit("removeToken"),this.$router.push("/")},async getMyOrders(){this.$store.commit("setIsLoading",!0),await l.A.get("/api/v1/orders/").then((t=>{this.orders=t.data})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)}}};const ve=(0,T.A)(pe,[["render",me]]);var he=ve,ke=(0,r.y$)({state:{cart:{items:[]},isAuthenticated:!1,token:"",isLoading:!1},getters:{cartTotalLength(t){return t.cart.items.reduce(((t,e)=>t+(e.quantity||0)),0)}},mutations:{setCart(t,e){t.cart=e},initializeStore(t){localStorage.getItem("cart")?t.cart=JSON.parse(localStorage.getItem("cart")):localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.getItem("token")?(t.token=localStorage.getItem("token"),t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},addToCart(t,e){const s=t.cart.items.find((t=>t.product.id===e.product.id));s?s.quantity=parseInt(s.quantity)+parseInt(e.quantity):t.cart.items.push(e),localStorage.setItem("cart",JSON.stringify(t.cart))},setLoading(t,e){t.isLoading=e},setToken(t,e){t.token=e,t.isAuthenticated=!0},removeToken(t){t.token="",t.isAuthenticated=!1},clearCart(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart))}},actions:{initializeCart({commit:t}){const e={items:[]};t("setCart",e),t("initializeStore")},initializeApp({commit:t}){setTimeout((()=>{t("setLoading",!1)}),1e3)}},modules:{}});const ge={class:"page-checkout"},Le={class:"columns is-multiline"},fe={class:"column is-12 box"},ye={class:"table is-fullwidth"},be={class:"column is-12 box"},_e={class:"columns is-multiline"},Ce={class:"column is-6"},Ee={class:"field"},Se={class:"control"},Ie={class:"field"},xe={class:"control"},we={class:"field"},Te={class:"control"},Xe={class:"field"},Ae={class:"control"},Pe={class:"column is-6"},Oe={class:"field"},qe={class:"control"},Fe={class:"field"},Ke={class:"control"},$e={class:"field"},We={class:"control"},je={key:0,class:"notification is-danger mt-4"};function Je(t,e,s,l,i,r){return(0,n.uX)(),(0,n.CE)("div",ge,[(0,n.Lk)("div",Le,[e[22]||(e[22]=(0,n.Lk)("div",{class:"column is-12"},[(0,n.Lk)("h1",{class:"title"},"Checkout")],-1)),(0,n.Lk)("div",fe,[(0,n.Lk)("table",ye,[e[9]||(e[9]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Product"),(0,n.Lk)("th",null,"Price"),(0,n.Lk)("th",null,"Quantity"),(0,n.Lk)("th",null,"Total")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.cart.items,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.product.id},[(0,n.Lk)("td",null,(0,o.v_)(t.product.name),1),(0,n.Lk)("td",null,"$"+(0,o.v_)(t.product.price),1),(0,n.Lk)("td",null,(0,o.v_)(t.quantity),1),(0,n.Lk)("td",null,"$"+(0,o.v_)(r.getItemTotal(t).toFixed(2)),1)])))),128))]),(0,n.Lk)("tfoot",null,[(0,n.Lk)("tr",null,[e[8]||(e[8]=(0,n.Lk)("td",{colspan:"2"},"Total",-1)),(0,n.Lk)("td",null,(0,o.v_)(r.cartTotalLength),1),(0,n.Lk)("td",null,"$"+(0,o.v_)(r.cartTotalPrice.toFixed(2)),1)])])])]),(0,n.Lk)("div",be,[e[18]||(e[18]=(0,n.Lk)("h2",{class:"subtitle"},"Shipping details",-1)),e[19]||(e[19]=(0,n.Lk)("p",{class:"has-text-grey mb-4"},"* All fields are required",-1)),(0,n.Lk)("div",_e,[(0,n.Lk)("div",Ce,[(0,n.Lk)("div",Ee,[e[10]||(e[10]=(0,n.Lk)("label",null,"First name*",-1)),(0,n.Lk)("div",Se,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>i.first_name=t)},null,512),[[a.Jo,i.first_name]])])]),(0,n.Lk)("div",Ie,[e[11]||(e[11]=(0,n.Lk)("label",null,"Last name*",-1)),(0,n.Lk)("div",xe,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>i.last_name=t)},null,512),[[a.Jo,i.last_name]])])]),(0,n.Lk)("div",we,[e[12]||(e[12]=(0,n.Lk)("label",null,"E-mail*",-1)),(0,n.Lk)("div",Te,[(0,n.bo)((0,n.Lk)("input",{type:"email",class:"input","onUpdate:modelValue":e[2]||(e[2]=t=>i.email=t)},null,512),[[a.Jo,i.email]])])]),(0,n.Lk)("div",Xe,[e[13]||(e[13]=(0,n.Lk)("label",null,"Phone*",-1)),(0,n.Lk)("div",Ae,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":e[3]||(e[3]=t=>i.phone=t)},null,512),[[a.Jo,i.phone]])])])]),(0,n.Lk)("div",Pe,[(0,n.Lk)("div",Oe,[e[14]||(e[14]=(0,n.Lk)("label",null,"Address*",-1)),(0,n.Lk)("div",qe,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":e[4]||(e[4]=t=>i.address=t)},null,512),[[a.Jo,i.address]])])]),(0,n.Lk)("div",Fe,[e[15]||(e[15]=(0,n.Lk)("label",null,"Zip code*",-1)),(0,n.Lk)("div",Ke,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":e[5]||(e[5]=t=>i.zipcode=t)},null,512),[[a.Jo,i.zipcode]])])]),(0,n.Lk)("div",$e,[e[16]||(e[16]=(0,n.Lk)("label",null,"Place*",-1)),(0,n.Lk)("div",We,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"input","onUpdate:modelValue":e[6]||(e[6]=t=>i.place=t)},null,512),[[a.Jo,i.place]])])])])]),i.errors.length?((0,n.uX)(),(0,n.CE)("div",je,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.errors,(t=>((0,n.uX)(),(0,n.CE)("p",{key:t},(0,o.v_)(t),1)))),128))])):(0,n.Q3)("",!0),e[20]||(e[20]=(0,n.Lk)("hr",null,null,-1)),e[21]||(e[21]=(0,n.Lk)("div",{id:"card-element",class:"mb-5"},null,-1)),r.cartTotalLength?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[e[17]||(e[17]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("button",{class:"button is-dark",onClick:e[7]||(e[7]=(...t)=>r.submitForm&&r.submitForm(...t))},"Pay with Stripe")],64)):(0,n.Q3)("",!0)])])])}var Re={name:"Checkout",data(){return{cart:{items:[]},stripe:{},card:{},first_name:"",last_name:"",email:"",phone:"",address:"",zipcode:"",place:"",errors:[]}},mounted(){if(document.title="Checkout | Djackets",this.cart=this.$store.state.cart,this.cartTotalLength>0){this.stripe=Stripe("pk_test_51RQJTjHBEtBDlMYR4an201NBf0CCGIBcKyLsVgmHYJxD8XxqVL7yzu4LNXlvB7e5Yo8dpRTaYNfJWkQQPKfo7y6c00hejYoCfb");const t=this.stripe.elements();this.card=t.create("card",{hidePostalCode:!0}),this.card.mount("#card-element")}},methods:{getItemTotal(t){return t.quantity*t.product.price},submitForm(){this.errors=[],""===this.first_name&&this.errors.push("The first name field is missing!"),""===this.last_name&&this.errors.push("The last name field is missing!"),""===this.email&&this.errors.push("The email field is missing!"),""===this.phone&&this.errors.push("The phone field is missing!"),""===this.address&&this.errors.push("The address field is missing!"),""===this.zipcode&&this.errors.push("The zip code field is missing!"),""===this.place&&this.errors.push("The place field is missing!"),this.errors.length||(this.$store.commit("setLoading",!0),this.stripe.createToken(this.card).then((t=>{t.error?(this.$store.commit("setLoading",!1),this.errors.push("Something went wrong with Stripe. Please try again"),console.log(t.error.message)):this.stripeTokenHandler(t.token)})))},async stripeTokenHandler(t){const e=[];for(let n=0;n<this.cart.items.length;n++){const t=this.cart.items[n],s={product:t.product.id,quantity:t.quantity,price:t.product.price*t.quantity};e.push(s)}const s={first_name:this.first_name,last_name:this.last_name,email:this.email,address:this.address,zipcode:this.zipcode,place:this.place,phone:this.phone,items:e,stripe_token:t.id};try{await l.A.post("/api/v1/checkout/",s,{headers:{Authorization:`Token ${localStorage.getItem("authToken")}`}});this.$store.commit("clearCart"),this.$router.push("/cart/success/")}catch(a){console.error("Error response:",a.response.data),this.errors.push(a.response.data.error||"Something went wrong. Please try again")}finally{this.$store.commit("setLoading",!1)}}},computed:{cartTotalPrice(){return this.cart.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)},cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+e.quantity),0)}}};const ze=(0,T.A)(Re,[["render",Je]]);var Ue=ze;const Ne={class:"page-success"};var Ve={__name:"Success",setup(t){return document.title="store-Success",(t,e)=>((0,n.uX)(),(0,n.CE)("div",Ne,e[0]||(e[0]=[(0,n.Lk)("div",{class:"columns is-multiline"},[(0,n.Lk)("div",{class:"columns is-12"},[(0,n.Lk)("h1",{class:"title"},"Thank you"),(0,n.Lk)("p",null,"Your order will be processed with in 48 hours")])],-1)])))}};const Qe=Ve;var Me=Qe;const Be=[{path:"/",name:"Home",component:U},{path:"/about",name:"About",component:()=>s.e(594).then(s.bind(s,603))},{path:"/:category_slug/:product_slug/",name:"product",component:ot},{path:"/:category_slug/",name:"Category",component:mt},{path:"/search/",name:"Search",component:Et},{path:"/cart/",name:"cart",component:$t},{path:"/sign-up/",name:"SignUp",component:Ht},{path:"/log-in/",name:"LogIn",component:ie},{path:"/my-account/",name:"MyAccount",component:he,meta:{requireLogin:!0}},{path:"/cart/checkout/",name:"Checkout",component:Ue,meta:{requireLogin:!0}},{path:"/cart/success/",name:"success",component:Me},{path:"/:pathMatch(.*)*/",redirect:"/"}],De=(0,b.aE)({history:(0,b.LA)("/"),routes:Be});De.beforeEach(((t,e,s)=>{t.matched.some((t=>t.meta.requireLogin))&&!ke.state.isAuthenticated?s({name:"LogIn",query:{to:t.path}}):s()}));var He=De;l.A.defaults.baseURL="http://127.0.0.1:8000",(0,a.Ef)(y).use(ke).use(He,l.A).mount("#app"),ke.dispatch("initializeCart")},8798:function(t){function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=function(){return[]},e.resolve=e,e.id=8798,t.exports=e}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,o){if(!a){var l=1/0;for(c=0;c<t.length;c++){a=t[c][0],n=t[c][1],o=t[c][2];for(var i=!0,r=0;r<a.length;r++)(!1&o||l>=o)&&Object.keys(s.O).every((function(t){return s.O[t](a[r])}))?a.splice(r--,1):(i=!1,o<l&&(l=o));if(i){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[a,n,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/about.30f00c0d.js"}}(),function(){s.miniCssF=function(t){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="pront_vue:";s.l=function(a,n,o,l){if(t[a])t[a].push(n);else{var i,r;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==e+o){i=d;break}}i||(r=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",e+o),i.src=a),t[a]=[n];var m=function(e,s){i.onerror=i.onload=null,clearTimeout(p);var n=t[a];if(delete t[a],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),r&&document.head.appendChild(i)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={524:0};s.f.j=function(e,a){var n=s.o(t,e)?t[e]:void 0;if(0!==n)if(n)a.push(n[2]);else{var o=new Promise((function(s,a){n=t[e]=[s,a]}));a.push(n[2]=o);var l=s.p+s.u(e),i=new Error,r=function(a){if(s.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var o=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;i.message="Loading chunk "+e+" failed.\n("+o+": "+l+")",i.name="ChunkLoadError",i.type=o,i.request=l,n[1](i)}};s.l(l,r,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,o,l=a[0],i=a[1],r=a[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(r)var c=r(s)}for(e&&e(a);u<l.length;u++)o=l[u],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(c)},a=self["webpackChunkpront_vue"]=self["webpackChunkpront_vue"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(5020)}));a=s.O(a)})();
//# sourceMappingURL=app.4fdc50c4.js.map